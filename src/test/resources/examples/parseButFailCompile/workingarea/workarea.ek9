#!ek9
<?-

  Workspace. Work in progress for the PRE_IR_CHECKS errors.

-?>
defines module just.workspace

  defines function

    SimpleAssignment()
      anInt as Integer?
      assignedAtDeclaration <- 1

      anInt: 22
      assert anInt?

      //Now try reassignment, which is Ok to do
      assignedAtDeclaration: 56
      assert assignedAtDeclaration?

  defines class

    C1
      assignmentInMethod()
        anInt as Integer?
        assignedAtDeclaration <- 1

        anInt: 22
        assert anInt?

        //Now try reassignment, which is Ok to do
        assignedAtDeclaration: 56
        assert assignedAtDeclaration?

    <!-
    ConditionalAssignment1()
      varAsTrue <- true
      anInt as Integer?

      anInt: 22

      if varAsTrue
        unUsedValue <- 34
        value <- 33
        anInt: value

        assert unUsedValue?

      assert anInt?

    ConditionalAssignment2()
      varAsTrue <- true
      anInt as Integer?

      anInt: 22

      if varAsTrue
        unUsedValue <- 34
        value <- 33
        anInt: value
        assert unUsedValue?
      else
        unUsedValue <- 36
        value <- 35
        anInt: value
        assert unUsedValue?

      assert anInt?

    ConditionalAssignment3()
      varAsTrue <- true
      varAsFalse <- false
      anInt as Integer?

      anInt: 22

      if varAsTrue
        unUsedValue <- 34
        value <- 33
        anInt: value
        assert unUsedValue?
      else if not varAsFalse
        unUsedValue <- 36
        value <- 35
        anInt: value
        assert unUsedValue?
      else
        unUsedValue <- 39
        value <- 40
        anInt: value
        assert unUsedValue?

      assert anInt?

    ConditionalAssignment4()
      varAsTrue <- true
      anInt as Integer?
      anInt: 22

      if anInt ?= 22 with varAsTrue
        unUsedValue <- 34
        value <- 33
        anInt: value
        assert unUsedValue?

      assert anInt?
    -!>

//EOF


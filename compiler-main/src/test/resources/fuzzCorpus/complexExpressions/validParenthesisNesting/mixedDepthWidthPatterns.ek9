#!ek9
<?-
  Fuzz Test: Mixed depth and width parenthesis patterns

  Tests compiler robustness with combinations of deep and wide
  parenthesis structures. These represent real-world complex
  mathematical expressions.
-?>
defines module fuzz.parenthesis.mixed

  defines function

    <?- Test pyramid pattern: wide at base, deep at top -?>
    testPyramidPattern()
      <- result as Integer?

      a <- 1
      b <- 2
      c <- 3
      d <- 4

      //Wide base: (a+b), (c+d) then nested deeper
      result: ((((a + b) + (c + d)) * ((a - b) + (c - d))) + (((a * b) + (c * d)) - ((a / b) + (c / d))))

    <?- Test inverted pyramid: deep branches, combined wide -?>
    testInvertedPyramid()
      <- result as Integer?

      x <- 10

      //Deep branches combined at top level
      result: (((((x + 1) + 2) + 3) + 4) + 5) + (((((x - 1) - 2) - 3) - 4) - 5) + (((((x * 2) * 2) * 2) / 2) / 2)

    <?- Test binary tree pattern -?>
    testBinaryTreePattern()
      <- result as Integer?

      a <- 1
      b <- 2
      c <- 3
      d <- 4
      e <- 5
      f <- 6
      g <- 7
      h <- 8

      //Binary tree: 8 leaves, 3 levels deep
      result: (((a + b) + (c + d)) + ((e + f) + (g + h)))

    <?- Test unbalanced tree pattern -?>
    testUnbalancedTree()
      <- result as Integer?

      a <- 1
      b <- 2
      c <- 3

      //Unbalanced: one deep branch, one shallow
      result: ((((((a + b) + c) + a) + b) + c) + (a + b))

    <?- Test scientific formula style: quadratic with nested sqrt -?>
    testQuadraticStyle()
      <- result as Float?

      a <- 1.0
      b <- 5.0
      c <- 6.0

      //Quadratic discriminant pattern: (-b + sqrt(b^2 - 4ac)) / (2a)
      discriminant <- ((b ^ 2.0) - (4.0 * a * c))
      result: ((0.0 - b) + (sqrt discriminant)) / (2.0 * a)

    <?- Test complex formula with mixed operations -?>
    testComplexFormula()
      <- result as Float?

      x <- 2.0
      y <- 3.0
      z <- 4.0

      //Complex multi-level formula
      result: (((x + y) * (y + z)) / ((z - x) + 1.0)) + (((x * y) + (y * z)) - ((z * x) / 2.0))

    <?- Test deeply nested within wide structure -?>
    testDeepInWide()
      <- result as Integer?

      a <- 1
      b <- 2

      //5 wide groups, each 5 deep
      result: (((((a + b))))) + (((((a - b))))) + (((((a * b))))) + (((((a + a))))) + (((((b + b)))))

//EOF

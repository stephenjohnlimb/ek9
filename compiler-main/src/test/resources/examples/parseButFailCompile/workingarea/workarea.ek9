#!ek9
<?-
  Test IR generation for try-with-resources with single resource.
  Tests basic resource initialization, scope management, and automatic close().
-?>
defines module exceptionHandling

  defines class

    SimpleResource3

      SimpleResource3()
        -> resourceName as String
        assert resourceName?

      operator close as pure
        stdout <- Stdout()
        stdout.println("Closing resource")

      override operator ? as pure
        <- rtn <- true

  defines function

    testSingleResource()
      <- rtn as String: String()

      try
        -> resource <- SimpleResource3("test")
        rtn: "OK"
      catch
        -> ex as Exception
        rtn: "ERROR"

//EOF


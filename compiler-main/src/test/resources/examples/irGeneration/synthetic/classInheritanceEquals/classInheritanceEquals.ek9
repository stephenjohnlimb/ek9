#!ek9
<?-
  Test inheritance with default operators.

  This tests the encapsulation-respecting approach:
  - Animal has <=> but NOT ==
  - Cat extends Animal and has both <=> and ==

  Key behaviors verified:
  - Cat.<=> calls super._cmp() because Animal has <=>
  - Cat.== does NOT call super._eq() because Animal doesn't have ==
  - Cat.== only compares its own fields (breed), respecting encapsulation
-?>
defines module synthetic.classInheritanceEquals

  defines class

    @IR: IR_GENERATION: TYPE: "synthetic.classInheritanceEquals::Animal": `ConstructDfn: synthetic.classInheritanceEquals::Animal
Field: name, org.ek9.lang::String  
OperationDfn: synthetic.classInheritanceEquals::Animal.Animal()->synthetic.classInheritanceEquals::Animal  
BasicBlock: _entry_2
CALL (synthetic.classInheritanceEquals::Animal)this.i_init() [pure=false, complexity=0]
RETURN this
OperationDfn: synthetic.classInheritanceEquals::Animal._cmp(synthetic.classInheritanceEquals::Animal)->org.ek9.lang::Integer  
BasicBlock: _entry_1
SCOPE_ENTER __cmp_1
REFERENCE rtn, org.ek9.lang::Integer
_temp1 = CALL (synthetic.classInheritanceEquals::Animal)this._isSet() [pure=false, complexity=0]
RETAIN _temp1
SCOPE_REGISTER _temp1, __cmp_1
_temp2 = CALL (org.ek9.lang::Boolean)_temp1._true() [pure=false, complexity=0]
BRANCH_FALSE _temp2, _return_unset_1
_temp3 = CALL (synthetic.classInheritanceEquals::Animal)param._isSet() [pure=false, complexity=0]
RETAIN _temp3
SCOPE_REGISTER _temp3, __cmp_1
_temp4 = CALL (org.ek9.lang::Boolean)_temp3._true() [pure=false, complexity=0]
BRANCH_FALSE _temp4, _return_unset_1
_temp5 = CALL (synthetic.classInheritanceEquals::Animal)this._fieldSetStatus() [pure=false, complexity=0]
RETAIN _temp5
SCOPE_REGISTER _temp5, __cmp_1
_temp6 = CALL (synthetic.classInheritanceEquals::Animal)param._fieldSetStatus() [pure=false, complexity=0]
RETAIN _temp6
SCOPE_REGISTER _temp6, __cmp_1
_temp7 = CALL (org.ek9.lang::Integer)_temp5._eq(_temp6) [pure=false, complexity=0]
RETAIN _temp7
SCOPE_REGISTER _temp7, __cmp_1
_temp8 = CALL (org.ek9.lang::Boolean)_temp7._isSet() [pure=false, complexity=0]
RETAIN _temp8
SCOPE_REGISTER _temp8, __cmp_1
_temp9 = CALL (org.ek9.lang::Boolean)_temp8._true() [pure=false, complexity=0]
BRANCH_FALSE _temp9, _return_unset_1
_temp10 = CALL (org.ek9.lang::Boolean)_temp7._true() [pure=false, complexity=0]
RETAIN _temp10
SCOPE_REGISTER _temp10, __cmp_1
BRANCH_FALSE _temp10, _return_unset_1
_temp11 = LOAD this.name
RETAIN _temp11
SCOPE_REGISTER _temp11, __cmp_1
_temp12 = LOAD param.name
RETAIN _temp12
SCOPE_REGISTER _temp12, __cmp_1
_temp13 = CALL (org.ek9.lang::String)_temp11._cmp(_temp12) [pure=false, complexity=0]
RETAIN _temp13
SCOPE_REGISTER _temp13, __cmp_1
_temp14 = CALL (org.ek9.lang::Integer)_temp13._isSet() [pure=false, complexity=0]
RETAIN _temp14
SCOPE_REGISTER _temp14, __cmp_1
_temp15 = CALL (org.ek9.lang::Boolean)_temp14._true() [pure=false, complexity=0]
BRANCH_FALSE _temp15, _return_unset_1
_temp16 = LOAD_LITERAL 0, org.ek9.lang::Integer
RETAIN _temp16
SCOPE_REGISTER _temp16, __cmp_1
_temp17 = CALL (org.ek9.lang::Integer)_temp13._eq(_temp16) [pure=false, complexity=0]
RETAIN _temp17
SCOPE_REGISTER _temp17, __cmp_1
_temp18 = CALL (org.ek9.lang::Boolean)_temp17._true() [pure=false, complexity=0]
RETAIN _temp18
SCOPE_REGISTER _temp18, __cmp_1
BRANCH_TRUE _temp18, _continue_cmp_1
STORE rtn, _temp13
RETAIN rtn
BRANCH _return_result_1
LABEL _continue_cmp_1
BRANCH _return_zero_1
LABEL _return_unset_1
_temp19 = CALL (org.ek9.lang::Integer)org.ek9.lang::Integer.<init>() [pure=false, complexity=0]
RETAIN _temp19
SCOPE_REGISTER _temp19, __cmp_1
STORE rtn, _temp19
RETAIN rtn
SCOPE_EXIT __cmp_1
RETURN rtn
LABEL _return_zero_1
_temp20 = LOAD_LITERAL 0, org.ek9.lang::Integer
RETAIN _temp20
SCOPE_REGISTER _temp20, __cmp_1
STORE rtn, _temp20
RETAIN rtn
SCOPE_EXIT __cmp_1
RETURN rtn
LABEL _return_result_1
SCOPE_EXIT __cmp_1
RETURN rtn
OperationDfn: synthetic.classInheritanceEquals::Animal._fieldSetStatus()->org.ek9.lang::Integer  
BasicBlock: _entry_3
SCOPE_ENTER __fieldSetStatus_1
REFERENCE rtn, org.ek9.lang::Integer
_temp21 = LOAD_LITERAL 0, org.ek9.lang::Integer
RETAIN _temp21
SCOPE_REGISTER _temp21, __fieldSetStatus_1
STORE rtn, _temp21
RETAIN rtn
_temp22 = LOAD this.name
RETAIN _temp22
SCOPE_REGISTER _temp22, __fieldSetStatus_1
_temp23 = CALL (org.ek9.lang::String)_temp22._isSet() [pure=false, complexity=0]
RETAIN _temp23
SCOPE_REGISTER _temp23, __fieldSetStatus_1
_temp24 = CALL (org.ek9.lang::Boolean)_temp23._true() [pure=false, complexity=0]
RETAIN _temp24
SCOPE_REGISTER _temp24, __fieldSetStatus_1
BRANCH_FALSE _temp24, _field_skip_1
_temp25 = LOAD_LITERAL 1, org.ek9.lang::Integer
RETAIN _temp25
SCOPE_REGISTER _temp25, __fieldSetStatus_1
_temp26 = CALL (org.ek9.lang::Integer)rtn._or(_temp25) [pure=false, complexity=0]
RETAIN _temp26
SCOPE_REGISTER _temp26, __fieldSetStatus_1
STORE rtn, _temp26
RETAIN rtn
LABEL _field_skip_1
SCOPE_EXIT __fieldSetStatus_1
RETURN rtn
OperationDfn: synthetic.classInheritanceEquals::Animal.c_init()->org.ek9.lang::Void  
BasicBlock: _entry_1
RETURN
OperationDfn: synthetic.classInheritanceEquals::Animal.i_init()->org.ek9.lang::Void  
BasicBlock: _entry_1
REFERENCE this.name, org.ek9.lang::String
_temp1 = LOAD_LITERAL Unknown, org.ek9.lang::String
RETAIN _temp1
SCOPE_REGISTER _temp1, i_init
STORE this.name, _temp1
RETAIN this.name
RETURN`
    Animal as open
      name <- "Unknown"

      default operator <=>

    @IR: IR_GENERATION: TYPE: "synthetic.classInheritanceEquals::Cat": `ConstructDfn: synthetic.classInheritanceEquals::Cat
Field: breed, org.ek9.lang::String  
OperationDfn: synthetic.classInheritanceEquals::Cat._cmp(synthetic.classInheritanceEquals::Cat)->org.ek9.lang::Integer  
BasicBlock: _entry_1
SCOPE_ENTER __cmp_1
REFERENCE rtn, org.ek9.lang::Integer
_temp1 = CALL (synthetic.classInheritanceEquals::Cat)this._isSet() [pure=false, complexity=0]
RETAIN _temp1
SCOPE_REGISTER _temp1, __cmp_1
_temp2 = CALL (org.ek9.lang::Boolean)_temp1._true() [pure=false, complexity=0]
BRANCH_FALSE _temp2, _return_unset_1
_temp3 = CALL (synthetic.classInheritanceEquals::Cat)param._isSet() [pure=false, complexity=0]
RETAIN _temp3
SCOPE_REGISTER _temp3, __cmp_1
_temp4 = CALL (org.ek9.lang::Boolean)_temp3._true() [pure=false, complexity=0]
BRANCH_FALSE _temp4, _return_unset_1
_temp5 = CALL (synthetic.classInheritanceEquals::Cat)this._fieldSetStatus() [pure=false, complexity=0]
RETAIN _temp5
SCOPE_REGISTER _temp5, __cmp_1
_temp6 = CALL (synthetic.classInheritanceEquals::Cat)param._fieldSetStatus() [pure=false, complexity=0]
RETAIN _temp6
SCOPE_REGISTER _temp6, __cmp_1
_temp7 = CALL (org.ek9.lang::Integer)_temp5._eq(_temp6) [pure=false, complexity=0]
RETAIN _temp7
SCOPE_REGISTER _temp7, __cmp_1
_temp8 = CALL (org.ek9.lang::Boolean)_temp7._isSet() [pure=false, complexity=0]
RETAIN _temp8
SCOPE_REGISTER _temp8, __cmp_1
_temp9 = CALL (org.ek9.lang::Boolean)_temp8._true() [pure=false, complexity=0]
BRANCH_FALSE _temp9, _return_unset_1
_temp10 = CALL (org.ek9.lang::Boolean)_temp7._true() [pure=false, complexity=0]
RETAIN _temp10
SCOPE_REGISTER _temp10, __cmp_1
BRANCH_FALSE _temp10, _return_unset_1
_temp11 = CALL (synthetic.classInheritanceEquals::Animal)super._cmp(param) [pure=false, complexity=0]
RETAIN _temp11
SCOPE_REGISTER _temp11, __cmp_1
_temp12 = CALL (org.ek9.lang::Integer)_temp11._isSet() [pure=false, complexity=0]
RETAIN _temp12
SCOPE_REGISTER _temp12, __cmp_1
_temp13 = CALL (org.ek9.lang::Boolean)_temp12._true() [pure=false, complexity=0]
BRANCH_FALSE _temp13, _return_unset_1
_temp14 = LOAD_LITERAL 0, org.ek9.lang::Integer
RETAIN _temp14
SCOPE_REGISTER _temp14, __cmp_1
_temp15 = CALL (org.ek9.lang::Integer)_temp11._eq(_temp14) [pure=false, complexity=0]
RETAIN _temp15
SCOPE_REGISTER _temp15, __cmp_1
_temp16 = CALL (org.ek9.lang::Boolean)_temp15._true() [pure=false, complexity=0]
RETAIN _temp16
SCOPE_REGISTER _temp16, __cmp_1
BRANCH_TRUE _temp16, _continue_cmp_1
STORE rtn, _temp11
RETAIN rtn
BRANCH _return_result_1
LABEL _continue_cmp_1
_temp17 = LOAD this.breed
RETAIN _temp17
SCOPE_REGISTER _temp17, __cmp_1
_temp18 = LOAD param.breed
RETAIN _temp18
SCOPE_REGISTER _temp18, __cmp_1
_temp19 = CALL (org.ek9.lang::String)_temp17._cmp(_temp18) [pure=false, complexity=0]
RETAIN _temp19
SCOPE_REGISTER _temp19, __cmp_1
_temp20 = CALL (org.ek9.lang::Integer)_temp19._isSet() [pure=false, complexity=0]
RETAIN _temp20
SCOPE_REGISTER _temp20, __cmp_1
_temp21 = CALL (org.ek9.lang::Boolean)_temp20._true() [pure=false, complexity=0]
BRANCH_FALSE _temp21, _return_unset_1
_temp22 = LOAD_LITERAL 0, org.ek9.lang::Integer
RETAIN _temp22
SCOPE_REGISTER _temp22, __cmp_1
_temp23 = CALL (org.ek9.lang::Integer)_temp19._eq(_temp22) [pure=false, complexity=0]
RETAIN _temp23
SCOPE_REGISTER _temp23, __cmp_1
_temp24 = CALL (org.ek9.lang::Boolean)_temp23._true() [pure=false, complexity=0]
RETAIN _temp24
SCOPE_REGISTER _temp24, __cmp_1
BRANCH_TRUE _temp24, _continue_cmp_2
STORE rtn, _temp19
RETAIN rtn
BRANCH _return_result_1
LABEL _continue_cmp_2
BRANCH _return_zero_1
LABEL _return_unset_1
_temp25 = CALL (org.ek9.lang::Integer)org.ek9.lang::Integer.<init>() [pure=false, complexity=0]
RETAIN _temp25
SCOPE_REGISTER _temp25, __cmp_1
STORE rtn, _temp25
RETAIN rtn
SCOPE_EXIT __cmp_1
RETURN rtn
LABEL _return_zero_1
_temp26 = LOAD_LITERAL 0, org.ek9.lang::Integer
RETAIN _temp26
SCOPE_REGISTER _temp26, __cmp_1
STORE rtn, _temp26
RETAIN rtn
SCOPE_EXIT __cmp_1
RETURN rtn
LABEL _return_result_1
SCOPE_EXIT __cmp_1
RETURN rtn
OperationDfn: synthetic.classInheritanceEquals::Cat._eq(synthetic.classInheritanceEquals::Cat)->org.ek9.lang::Boolean  
BasicBlock: _entry_2
SCOPE_ENTER __eq_1
REFERENCE rtn, org.ek9.lang::Boolean
_temp27 = CALL (synthetic.classInheritanceEquals::Cat)this._isSet() [pure=false, complexity=0]
RETAIN _temp27
SCOPE_REGISTER _temp27, __eq_1
_temp28 = CALL (org.ek9.lang::Boolean)_temp27._true() [pure=false, complexity=0]
BRANCH_FALSE _temp28, _return_unset_2
_temp29 = CALL (synthetic.classInheritanceEquals::Cat)param._isSet() [pure=false, complexity=0]
RETAIN _temp29
SCOPE_REGISTER _temp29, __eq_1
_temp30 = CALL (org.ek9.lang::Boolean)_temp29._true() [pure=false, complexity=0]
BRANCH_FALSE _temp30, _return_unset_2
_temp31 = CALL (synthetic.classInheritanceEquals::Cat)this._fieldSetStatus() [pure=false, complexity=0]
RETAIN _temp31
SCOPE_REGISTER _temp31, __eq_1
_temp32 = CALL (synthetic.classInheritanceEquals::Cat)param._fieldSetStatus() [pure=false, complexity=0]
RETAIN _temp32
SCOPE_REGISTER _temp32, __eq_1
_temp33 = CALL (org.ek9.lang::Integer)_temp31._eq(_temp32) [pure=false, complexity=0]
RETAIN _temp33
SCOPE_REGISTER _temp33, __eq_1
_temp34 = CALL (org.ek9.lang::Boolean)_temp33._isSet() [pure=false, complexity=0]
RETAIN _temp34
SCOPE_REGISTER _temp34, __eq_1
_temp35 = CALL (org.ek9.lang::Boolean)_temp34._true() [pure=false, complexity=0]
BRANCH_FALSE _temp35, _return_unset_2
_temp36 = CALL (org.ek9.lang::Boolean)_temp33._true() [pure=false, complexity=0]
RETAIN _temp36
SCOPE_REGISTER _temp36, __eq_1
BRANCH_FALSE _temp36, _return_unset_2
_temp37 = LOAD this.breed
RETAIN _temp37
SCOPE_REGISTER _temp37, __eq_1
_temp38 = LOAD param.breed
RETAIN _temp38
SCOPE_REGISTER _temp38, __eq_1
_temp39 = CALL (org.ek9.lang::String)_temp37._eq(_temp38) [pure=false, complexity=0]
RETAIN _temp39
SCOPE_REGISTER _temp39, __eq_1
_temp40 = CALL (org.ek9.lang::Boolean)_temp39._isSet() [pure=false, complexity=0]
RETAIN _temp40
SCOPE_REGISTER _temp40, __eq_1
_temp41 = CALL (org.ek9.lang::Boolean)_temp40._true() [pure=false, complexity=0]
BRANCH_FALSE _temp41, _return_unset_2
_temp42 = CALL (org.ek9.lang::Boolean)_temp39._true() [pure=false, complexity=0]
RETAIN _temp42
SCOPE_REGISTER _temp42, __eq_1
BRANCH_FALSE _temp42, _return_false_1
BRANCH _return_true_1
LABEL _return_unset_2
_temp43 = CALL (org.ek9.lang::Boolean)org.ek9.lang::Boolean.<init>() [pure=false, complexity=0]
RETAIN _temp43
SCOPE_REGISTER _temp43, __eq_1
STORE rtn, _temp43
RETAIN rtn
SCOPE_EXIT __eq_1
RETURN rtn
LABEL _return_false_1
_temp44 = CALL_STATIC (org.ek9.lang::Boolean)._ofFalse() [pure=false, complexity=0]
RETAIN _temp44
SCOPE_REGISTER _temp44, __eq_1
STORE rtn, _temp44
RETAIN rtn
SCOPE_EXIT __eq_1
RETURN rtn
LABEL _return_true_1
_temp45 = CALL_STATIC (org.ek9.lang::Boolean)._ofTrue() [pure=false, complexity=0]
RETAIN _temp45
SCOPE_REGISTER _temp45, __eq_1
STORE rtn, _temp45
RETAIN rtn
SCOPE_EXIT __eq_1
RETURN rtn
OperationDfn: synthetic.classInheritanceEquals::Cat.Cat()->synthetic.classInheritanceEquals::Cat  
BasicBlock: _entry_3
_temp_super_init = CALL (synthetic.classInheritanceEquals::Animal)super.<init>() [pure=false, complexity=0]
CALL (synthetic.classInheritanceEquals::Cat)this.i_init() [pure=false, complexity=0]
RETURN this
OperationDfn: synthetic.classInheritanceEquals::Cat._fieldSetStatus()->org.ek9.lang::Integer  
BasicBlock: _entry_4
SCOPE_ENTER __fieldSetStatus_1
REFERENCE rtn, org.ek9.lang::Integer
_temp46 = LOAD_LITERAL 0, org.ek9.lang::Integer
RETAIN _temp46
SCOPE_REGISTER _temp46, __fieldSetStatus_1
STORE rtn, _temp46
RETAIN rtn
_temp47 = LOAD this.breed
RETAIN _temp47
SCOPE_REGISTER _temp47, __fieldSetStatus_1
_temp48 = CALL (org.ek9.lang::String)_temp47._isSet() [pure=false, complexity=0]
RETAIN _temp48
SCOPE_REGISTER _temp48, __fieldSetStatus_1
_temp49 = CALL (org.ek9.lang::Boolean)_temp48._true() [pure=false, complexity=0]
RETAIN _temp49
SCOPE_REGISTER _temp49, __fieldSetStatus_1
BRANCH_FALSE _temp49, _field_skip_1
_temp50 = LOAD_LITERAL 1, org.ek9.lang::Integer
RETAIN _temp50
SCOPE_REGISTER _temp50, __fieldSetStatus_1
_temp51 = CALL (org.ek9.lang::Integer)rtn._or(_temp50) [pure=false, complexity=0]
RETAIN _temp51
SCOPE_REGISTER _temp51, __fieldSetStatus_1
STORE rtn, _temp51
RETAIN rtn
LABEL _field_skip_1
SCOPE_EXIT __fieldSetStatus_1
RETURN rtn
OperationDfn: synthetic.classInheritanceEquals::Cat.c_init()->org.ek9.lang::Void  
BasicBlock: _entry_1
_temp_c_init = CALL_STATIC (synthetic.classInheritanceEquals::Animal).c_init() [pure=false, complexity=0]
RETURN
OperationDfn: synthetic.classInheritanceEquals::Cat.i_init()->org.ek9.lang::Void  
BasicBlock: _entry_1
REFERENCE this.breed, org.ek9.lang::String
_temp1 = LOAD_LITERAL Domestic, org.ek9.lang::String
RETAIN _temp1
SCOPE_REGISTER _temp1, i_init
STORE this.breed, _temp1
RETAIN this.breed
RETURN`
    Cat extends Animal
      breed <- "Domestic"

      default operator <=>
      default operator ==

//EOF

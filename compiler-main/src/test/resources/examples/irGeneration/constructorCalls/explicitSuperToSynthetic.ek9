#!ek9
<?-
  Test that explicit super() calls can resolve to synthetic base constructors.
  Base has no explicit constructor (gets synthetic), child has explicit super() call.
-?>
defines module constructorCalls

  defines class

    BaseWithSyntheticConstructor as open
      baseField as String := "Base Auto Init"
      // No explicit constructor - gets synthetic one with i_init only

    @IR: IR_GENERATION: TYPE: "constructorCalls::ChildCallingSyntheticSuper": `ConstructDfn: constructorCalls::ChildCallingSyntheticSuper
Field: childField, org.ek9.lang::String  // ./explicitSuperToSynthetic.ek9:73:7
OperationDfn: constructorCalls::ChildCallingSyntheticSuper.ChildCallingSyntheticSuper()->constructorCalls::ChildCallingSyntheticSuper  // ./explicitSuperToSynthetic.ek9:75:7
BasicBlock: _entry_1
SCOPE_ENTER _scope_1  // ./explicitSuperToSynthetic.ek9:76:9
_temp1 = CALL (constructorCalls::BaseWithSyntheticConstructor)super.<init>() [pure=false, complexity=0, effects=RETURN_MUTATION]  // ./explicitSuperToSynthetic.ek9:76:9
CALL (constructorCalls::ChildCallingSyntheticSuper)this.i_init() [pure=false, complexity=0]  // ./explicitSuperToSynthetic.ek9:75:7
_temp2 = LOAD_LITERAL Explicitly set in constructor, org.ek9.lang::String  // ./explicitSuperToSynthetic.ek9:77:21
RETAIN _temp2  // ./explicitSuperToSynthetic.ek9:77:21
SCOPE_REGISTER _temp2, _scope_1  // ./explicitSuperToSynthetic.ek9:77:21
RELEASE this.childField  // ./explicitSuperToSynthetic.ek9:77:21
STORE this.childField, _temp2  // ./explicitSuperToSynthetic.ek9:77:21
RETAIN this.childField  // ./explicitSuperToSynthetic.ek9:77:21
SCOPE_EXIT _scope_1  // ./explicitSuperToSynthetic.ek9:76:9
RETURN  // ./explicitSuperToSynthetic.ek9:75:7
OperationDfn: constructorCalls::ChildCallingSyntheticSuper._fieldSetStatus()->org.ek9.lang::Integer  // ./explicitSuperToSynthetic.ek9:72:5
BasicBlock: _entry_1
SCOPE_ENTER __fieldSetStatus_1  // ./explicitSuperToSynthetic.ek9:72:5
REFERENCE rtn, org.ek9.lang::Integer  // ./explicitSuperToSynthetic.ek9:72:5
_temp1 = LOAD_LITERAL 0, org.ek9.lang::Integer  // ./explicitSuperToSynthetic.ek9:72:5
RETAIN _temp1  // ./explicitSuperToSynthetic.ek9:72:5
SCOPE_REGISTER _temp1, __fieldSetStatus_1  // ./explicitSuperToSynthetic.ek9:72:5
STORE rtn, _temp1  // ./explicitSuperToSynthetic.ek9:72:5
RETAIN rtn  // ./explicitSuperToSynthetic.ek9:72:5
_temp2 = LOAD this.childField  // ./explicitSuperToSynthetic.ek9:72:5
RETAIN _temp2  // ./explicitSuperToSynthetic.ek9:72:5
SCOPE_REGISTER _temp2, __fieldSetStatus_1  // ./explicitSuperToSynthetic.ek9:72:5
_temp3 = CALL (org.ek9.lang::String)_temp2._isSet() [pure=false, complexity=0]  // ./explicitSuperToSynthetic.ek9:72:5
RETAIN _temp3  // ./explicitSuperToSynthetic.ek9:72:5
SCOPE_REGISTER _temp3, __fieldSetStatus_1  // ./explicitSuperToSynthetic.ek9:72:5
_temp4 = CALL (org.ek9.lang::Boolean)_temp3._true() [pure=false, complexity=0]  // ./explicitSuperToSynthetic.ek9:72:5
RETAIN _temp4  // ./explicitSuperToSynthetic.ek9:72:5
SCOPE_REGISTER _temp4, __fieldSetStatus_1  // ./explicitSuperToSynthetic.ek9:72:5
BRANCH_FALSE _temp4, _field_skip_1  // ./explicitSuperToSynthetic.ek9:72:5
_temp5 = LOAD_LITERAL 1, org.ek9.lang::Integer  // ./explicitSuperToSynthetic.ek9:72:5
RETAIN _temp5  // ./explicitSuperToSynthetic.ek9:72:5
SCOPE_REGISTER _temp5, __fieldSetStatus_1  // ./explicitSuperToSynthetic.ek9:72:5
_temp6 = CALL (org.ek9.lang::Integer)rtn._or(_temp5) [pure=false, complexity=0]  // ./explicitSuperToSynthetic.ek9:72:5
RETAIN _temp6  // ./explicitSuperToSynthetic.ek9:72:5
SCOPE_REGISTER _temp6, __fieldSetStatus_1  // ./explicitSuperToSynthetic.ek9:72:5
STORE rtn, _temp6  // ./explicitSuperToSynthetic.ek9:72:5
RETAIN rtn  // ./explicitSuperToSynthetic.ek9:72:5
LABEL _field_skip_1
SCOPE_EXIT __fieldSetStatus_1  // ./explicitSuperToSynthetic.ek9:72:5
RETURN rtn  // ./explicitSuperToSynthetic.ek9:72:5
OperationDfn: constructorCalls::ChildCallingSyntheticSuper.c_init()->org.ek9.lang::Void  
BasicBlock: _entry_1
_temp_c_init = CALL_STATIC (constructorCalls::BaseWithSyntheticConstructor).c_init() [pure=false, complexity=0]
RETURN
OperationDfn: constructorCalls::ChildCallingSyntheticSuper.i_init()->org.ek9.lang::Void  
BasicBlock: _entry_1
REFERENCE this.childField, org.ek9.lang::String  // ./explicitSuperToSynthetic.ek9:73:7
_temp1 = LOAD_LITERAL Child Field, org.ek9.lang::String  // ./explicitSuperToSynthetic.ek9:73:31
RETAIN _temp1  // ./explicitSuperToSynthetic.ek9:73:31
SCOPE_REGISTER _temp1, i_init  // ./explicitSuperToSynthetic.ek9:73:31
STORE this.childField, _temp1  // ./explicitSuperToSynthetic.ek9:73:31
RETAIN this.childField  // ./explicitSuperToSynthetic.ek9:73:31
RETURN`
    ChildCallingSyntheticSuper extends BaseWithSyntheticConstructor
      childField as String := "Child Field"

      ChildCallingSyntheticSuper()
        super()  // Should resolve to BaseWithSyntheticConstructor's synthetic constructor
        childField: "Explicitly set in constructor"

//EOF
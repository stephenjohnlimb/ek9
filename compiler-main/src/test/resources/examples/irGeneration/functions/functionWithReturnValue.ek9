#!ek9
<?-
  Test IR generation for a function with a return value.

  Purpose: Demonstrate how the return variable (using <- syntax) is handled.
  The return variable is declared, assigned, and returned from _call method.
-?>
defines module ir.test.functions.returnvalue

  defines function

    @IR: IR_GENERATION: FUNCTION: "ir.test.functions.returnvalue::getGreeting": `
    ConstructDfn: ir.test.functions.returnvalue::getGreeting(org.ek9.lang::String)->org.ek9.lang::String
    OperationDfn: ir.test.functions.returnvalue::getGreeting.c_init()->org.ek9.lang::Void
    BasicBlock: _entry_1
    RETURN
    OperationDfn: ir.test.functions.returnvalue::getGreeting.i_init()->org.ek9.lang::Void
    BasicBlock: _entry_1
    RETURN
    OperationDfn: ir.test.functions.returnvalue::getGreeting.getGreeting()->ir.test.functions.returnvalue::getGreeting  // ./functionWithReturnValue.ek9:42:5
    BasicBlock: _entry_1
    CALL (ir.test.functions.returnvalue::getGreeting)this.i_init() [pure=false, complexity=0]  // ./functionWithReturnValue.ek9:42:5
    RETURN this  // ./functionWithReturnValue.ek9:42:5
    OperationDfn: ir.test.functions.returnvalue::getGreeting._call(org.ek9.lang::String)->org.ek9.lang::String  // ./functionWithReturnValue.ek9:42:5
    BasicBlock: _entry_1
    SCOPE_ENTER _scope_1  // ./functionWithReturnValue.ek9:43:7
    REFERENCE name, org.ek9.lang::String  // ./functionWithReturnValue.ek9:43:10
    REFERENCE greeting, org.ek9.lang::String  // ./functionWithReturnValue.ek9:44:10
    _temp2 = LOAD_LITERAL Hello, , org.ek9.lang::String  // ./functionWithReturnValue.ek9:44:30
    RETAIN _temp2  // ./functionWithReturnValue.ek9:44:30
    SCOPE_REGISTER _temp2, _scope_1  // ./functionWithReturnValue.ek9:44:30
    _temp3 = LOAD name  // ./functionWithReturnValue.ek9:44:42
    RETAIN _temp3  // ./functionWithReturnValue.ek9:44:42
    SCOPE_REGISTER _temp3, _scope_1  // ./functionWithReturnValue.ek9:44:42
    _temp1 = CALL (org.ek9.lang::String)_temp2._add(_temp3) [pure=true, complexity=2, effects=RETURN_MUTATION]  // ./functionWithReturnValue.ek9:44:40
    RETAIN _temp1  // ./functionWithReturnValue.ek9:44:30
    SCOPE_REGISTER _temp1, _scope_1  // ./functionWithReturnValue.ek9:44:30
    STORE greeting, _temp1  // ./functionWithReturnValue.ek9:44:30
    RETAIN greeting  // ./functionWithReturnValue.ek9:44:30
    SCOPE_EXIT _scope_1  // ./functionWithReturnValue.ek9:43:7
    RETURN greeting  // ./functionWithReturnValue.ek9:44:10`
    getGreeting() as pure
      -> name as String
      <- greeting as String: "Hello, " + name

//EOF

#!ek9
<?-
  Test IR generation for a concrete function extending an abstract function.

  Purpose: Demonstrate function inheritance:
  - Abstract base function defines signature
  - Concrete function extends and provides implementation
  - Both functions generate proper IR structures
-?>
defines module ir.test.functions.extendsabstract

  defines function

    // Abstract base function
    baseGreeting() as abstract
      -> name as String
      <- greeting as String?

    // Concrete function extending abstract - test this one
    @IR: IR_GENERATION: FUNCTION: "ir.test.functions.extendsabstract::helloGreeting": `
    ConstructDfn: ir.test.functions.extendsabstract::helloGreeting(org.ek9.lang::String)->org.ek9.lang::String
OperationDfn: ir.test.functions.extendsabstract::helloGreeting._call(org.ek9.lang::String)->org.ek9.lang::String  // ./functionExtendsAbstract.ek9:52:5
BasicBlock: _entry_1
SCOPE_ENTER _scope_1  // ./functionExtendsAbstract.ek9:53:7
REFERENCE name, org.ek9.lang::String  // ./functionExtendsAbstract.ek9:53:10
REFERENCE greeting, org.ek9.lang::String  // ./functionExtendsAbstract.ek9:54:10
_temp2 = LOAD_LITERAL Hello, , org.ek9.lang::String  // ./functionExtendsAbstract.ek9:54:30
RETAIN _temp2  // ./functionExtendsAbstract.ek9:54:30
SCOPE_REGISTER _temp2, _scope_1  // ./functionExtendsAbstract.ek9:54:30
_temp3 = LOAD name  // ./functionExtendsAbstract.ek9:54:42
RETAIN _temp3  // ./functionExtendsAbstract.ek9:54:42
SCOPE_REGISTER _temp3, _scope_1  // ./functionExtendsAbstract.ek9:54:42
_temp1 = CALL (org.ek9.lang::String)_temp2._add(_temp3) [pure=true, complexity=2, effects=RETURN_MUTATION]  // ./functionExtendsAbstract.ek9:54:40
RETAIN _temp1  // ./functionExtendsAbstract.ek9:54:30
SCOPE_REGISTER _temp1, _scope_1  // ./functionExtendsAbstract.ek9:54:30
STORE greeting, _temp1  // ./functionExtendsAbstract.ek9:54:30
RETAIN greeting  // ./functionExtendsAbstract.ek9:54:30
SCOPE_EXIT _scope_1  // ./functionExtendsAbstract.ek9:53:7
RETURN greeting  // ./functionExtendsAbstract.ek9:54:10
OperationDfn: ir.test.functions.extendsabstract::helloGreeting.helloGreeting()->ir.test.functions.extendsabstract::helloGreeting  // ./functionExtendsAbstract.ek9:52:5
BasicBlock: _entry_1
_temp_super_init = CALL (ir.test.functions.extendsabstract::baseGreeting)super.<init>() [pure=false, complexity=0]  // ./functionExtendsAbstract.ek9:52:5
CALL (ir.test.functions.extendsabstract::helloGreeting)this.i_init() [pure=false, complexity=0]  // ./functionExtendsAbstract.ek9:52:5
RETURN this  // ./functionExtendsAbstract.ek9:52:5
OperationDfn: ir.test.functions.extendsabstract::helloGreeting.c_init()->org.ek9.lang::Void  
BasicBlock: _entry_1
_temp_c_init = CALL_STATIC (ir.test.functions.extendsabstract::baseGreeting).c_init() [pure=false, complexity=0]
RETURN
OperationDfn: ir.test.functions.extendsabstract::helloGreeting.i_init()->org.ek9.lang::Void  
BasicBlock: _entry_1
RETURN`
    helloGreeting() extends baseGreeting
      -> name as String
      <- greeting as String: "Hello, " + name

//EOF

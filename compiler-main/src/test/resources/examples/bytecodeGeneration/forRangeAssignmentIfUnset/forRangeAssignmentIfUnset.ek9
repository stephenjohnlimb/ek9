#!ek9
defines module bytecode.test.forrangeassignifunset

  defines program

    @BYTECODE: CODE_GENERATION_AGGREGATES: TYPE: "bytecode.test.forrangeassignifunset::ForRangeAssignmentIfUnset": `public class bytecode.test.forrangeassignifunset.ForRangeAssignmentIfUnset {
  public bytecode.test.forrangeassignifunset.ForRangeAssignmentIfUnset();
    Code:
         0: aload_0
         1: invokespecial #CP                  // Method java/lang/Object."<init>":()V
         4: aload_0
         5: invokevirtual #CP                 // Method i_init:()V
         8: return

  public void _main(org.ek9.lang.Integer);
    Code:
         0: aconst_null
         1: astore_2
         2: new           #CP                 // class org/ek9/lang/Stdout
         5: dup
         6: invokespecial #CP                 // Method org/ek9/lang/Stdout."<init>":()V
         9: astore_3
        10: aload_3
        11: astore_2
        12: aconst_null
        13: astore        4
        15: iconst_0
        16: invokestatic  #CP                 // Method java/lang/Integer.toString:(I)Ljava/lang/String;
        19: invokestatic  #CP                 // Method org/ek9/lang/Integer._of:(Ljava/lang/String;)Lorg/ek9/lang/Integer;
        22: astore        5
        24: aload         5
        26: astore        4
        28: aconst_null
        29: astore        6
        31: new           #CP                 // class org/ek9/lang/Integer
        34: dup
        35: invokespecial #CP                 // Method org/ek9/lang/Integer."<init>":()V
        38: astore        7
        40: aload         7
        42: astore        6
        44: aload_1
        45: astore        8
        47: iconst_0
        48: invokestatic  #CP                 // Method java/lang/Integer.toString:(I)Ljava/lang/String;
        51: invokestatic  #CP                 // Method org/ek9/lang/Integer._of:(Ljava/lang/String;)Lorg/ek9/lang/Integer;
        54: astore        9
        56: aload         8
        58: aload         9
        60: invokevirtual #CP                 // Method org/ek9/lang/Integer._gt:(Lorg/ek9/lang/Integer;)Lorg/ek9/lang/Boolean;
        63: astore        10
        65: aload         10
        67: invokevirtual #CP                 // Method org/ek9/lang/Boolean._true:()Z
        70: istore        11
        72: iload         11
        74: ifeq          87
        77: aload_1
        78: astore        12
        80: aload         12
        82: astore        6
        84: goto          87
        87: aload         6
        89: astore        13
        91: aload         13
        93: ifnull        100
        96: iconst_0
        97: goto          101
       100: iconst_1
       101: istore        14
       103: iload         14
       105: ifeq          120
       108: invokestatic  #CP                 // Method org/ek9/lang/Boolean._ofFalse:()Lorg/ek9/lang/Boolean;
       111: astore        15
       113: aload         15
       115: astore        16
       117: goto          131
       120: aload         13
       122: invokevirtual #CP                 // Method org/ek9/lang/Integer._isSet:()Lorg/ek9/lang/Boolean;
       125: astore        17
       127: aload         17
       129: astore        16
       131: aload         16
       133: invokevirtual #CP                 // Method org/ek9/lang/Boolean._true:()Z
       136: istore        18
       138: iload         18
       140: ifeq          629
       143: aconst_null
       144: astore        19
       146: iconst_1
       147: invokestatic  #CP                 // Method java/lang/Integer.toString:(I)Ljava/lang/String;
       150: invokestatic  #CP                 // Method org/ek9/lang/Integer._of:(Ljava/lang/String;)Lorg/ek9/lang/Integer;
       153: astore        20
       155: aload         20
       157: astore        21
       159: aload         6
       161: astore        22
       163: aload         22
       165: astore        23
       167: aload         21
       169: invokevirtual #CP                 // Method org/ek9/lang/Integer._isSet:()Lorg/ek9/lang/Boolean;
       172: astore        24
       174: aload         24
       176: invokevirtual #CP                 // Method org/ek9/lang/Boolean._true:()Z
       179: istore        25
       181: iload         25
       183: ifne          196
       186: new           #CP                 // class java/lang/AssertionError
       189: dup
       190: ldc           #CP                 // String For-range \'start\' value must be set
       192: invokespecial #CP                 // Method java/lang/AssertionError."<init>":(Ljava/lang/Object;)V
       195: athrow
       196: aload         23
       198: invokevirtual #CP                 // Method org/ek9/lang/Integer._isSet:()Lorg/ek9/lang/Boolean;
       201: astore        26
       203: aload         26
       205: invokevirtual #CP                 // Method org/ek9/lang/Boolean._true:()Z
       208: istore        27
       210: iload         27
       212: ifne          225
       215: new           #CP                 // class java/lang/AssertionError
       218: dup
       219: ldc           #CP                 // String For-range \'end\' value must be set
       221: invokespecial #CP                 // Method java/lang/AssertionError."<init>":(Ljava/lang/Object;)V
       224: athrow
       225: aload         21
       227: aload         23
       229: invokevirtual #CP                 // Method org/ek9/lang/Integer._cmp:(Lorg/ek9/lang/Integer;)Lorg/ek9/lang/Integer;
       232: astore        28
       234: aload         21
       236: astore        29
       238: iconst_0
       239: invokestatic  #CP                 // Method java/lang/Integer.toString:(I)Ljava/lang/String;
       242: invokestatic  #CP                 // Method org/ek9/lang/Integer._of:(Ljava/lang/String;)Lorg/ek9/lang/Integer;
       245: astore        30
       247: aload         28
       249: aload         30
       251: invokevirtual #CP                 // Method org/ek9/lang/Integer._lt:(Lorg/ek9/lang/Integer;)Lorg/ek9/lang/Boolean;
       254: astore        31
       256: aload         31
       258: invokevirtual #CP                 // Method org/ek9/lang/Boolean._true:()Z
       261: istore        32
       263: iload         32
       265: ifne          393
       268: iconst_0
       269: invokestatic  #CP                 // Method java/lang/Integer.toString:(I)Ljava/lang/String;
       272: invokestatic  #CP                 // Method org/ek9/lang/Integer._of:(Ljava/lang/String;)Lorg/ek9/lang/Integer;
       275: astore        33
       277: aload         28
       279: aload         33
       281: invokevirtual #CP                 // Method org/ek9/lang/Integer._gt:(Lorg/ek9/lang/Integer;)Lorg/ek9/lang/Boolean;
       284: astore        34
       286: aload         34
       288: invokevirtual #CP                 // Method org/ek9/lang/Boolean._true:()Z
       291: istore        35
       293: iload         35
       295: ifne          511
       298: iconst_0
       299: invokestatic  #CP                 // Method java/lang/Integer.toString:(I)Ljava/lang/String;
       302: invokestatic  #CP                 // Method org/ek9/lang/Integer._of:(Ljava/lang/String;)Lorg/ek9/lang/Integer;
       305: astore        36
       307: aload         28
       309: aload         36
       311: invokevirtual #CP                 // Method org/ek9/lang/Integer._eq:(Lorg/ek9/lang/Integer;)Lorg/ek9/lang/Boolean;
       314: astore        37
       316: aload         37
       318: invokevirtual #CP                 // Method org/ek9/lang/Boolean._true:()Z
       321: istore        38
       323: iload         38
       325: ifeq          626
       328: aload         29
       330: astore        19
       332: aload         4
       334: astore        39
       336: aload         19
       338: astore        40
       340: aload         39
       342: aload         40
       344: invokevirtual #CP                 // Method org/ek9/lang/Integer._add:(Lorg/ek9/lang/Integer;)Lorg/ek9/lang/Integer;
       347: astore        41
       349: aload         41
       351: astore        4
       353: aload_2
       354: astore        42
       356: ldc           #CP                 // String i=
       358: invokestatic  #CP                 // Method org/ek9/lang/String._of:(Ljava/lang/String;)Lorg/ek9/lang/String;
       361: astore        43
       363: aload         19
       365: astore        44
       367: aload         44
       369: invokevirtual #CP                 // Method org/ek9/lang/Integer._string:()Lorg/ek9/lang/String;
       372: astore        45
       374: aload         43
       376: aload         45
       378: invokevirtual #CP                 // Method org/ek9/lang/String._add:(Lorg/ek9/lang/String;)Lorg/ek9/lang/String;
       381: astore        46
       383: aload         42
       385: aload         46
       387: invokevirtual #CP                 // Method org/ek9/lang/Stdout.println:(Lorg/ek9/lang/String;)V
       390: goto          626
       393: aload         29
       395: aload         23
       397: invokevirtual #CP                 // Method org/ek9/lang/Integer._cmp:(Lorg/ek9/lang/Integer;)Lorg/ek9/lang/Integer;
       400: astore        47
       402: iconst_0
       403: invokestatic  #CP                 // Method java/lang/Integer.toString:(I)Ljava/lang/String;
       406: invokestatic  #CP                 // Method org/ek9/lang/Integer._of:(Ljava/lang/String;)Lorg/ek9/lang/Integer;
       409: astore        48
       411: aload         47
       413: aload         48
       415: invokevirtual #CP                 // Method org/ek9/lang/Integer._lteq:(Lorg/ek9/lang/Integer;)Lorg/ek9/lang/Boolean;
       418: astore        49
       420: aload         49
       422: invokevirtual #CP                 // Method org/ek9/lang/Boolean._true:()Z
       425: istore        50
       427: iload         50
       429: ifeq          626
       432: aload         29
       434: astore        19
       436: aload         4
       438: astore        39
       440: aload         19
       442: astore        40
       444: aload         39
       446: aload         40
       448: invokevirtual #CP                 // Method org/ek9/lang/Integer._add:(Lorg/ek9/lang/Integer;)Lorg/ek9/lang/Integer;
       451: astore        41
       453: aload         41
       455: astore        4
       457: aload_2
       458: astore        42
       460: ldc           #CP                 // String i=
       462: invokestatic  #CP                 // Method org/ek9/lang/String._of:(Ljava/lang/String;)Lorg/ek9/lang/String;
       465: astore        43
       467: aload         19
       469: astore        44
       471: aload         44
       473: invokevirtual #CP                 // Method org/ek9/lang/Integer._string:()Lorg/ek9/lang/String;
       476: astore        45
       478: aload         43
       480: aload         45
       482: invokevirtual #CP                 // Method org/ek9/lang/String._add:(Lorg/ek9/lang/String;)Lorg/ek9/lang/String;
       485: astore        46
       487: aload         42
       489: aload         46
       491: invokevirtual #CP                 // Method org/ek9/lang/Stdout.println:(Lorg/ek9/lang/String;)V
       494: aload         29
       496: invokevirtual #CP                 // Method org/ek9/lang/Integer._inc:()Lorg/ek9/lang/Integer;
       499: astore        51
       501: aload         51
       503: astore        29
       505: goto          393
       508: nop
       509: nop
       510: athrow
       511: aload         29
       513: aload         23
       515: invokevirtual #CP                 // Method org/ek9/lang/Integer._cmp:(Lorg/ek9/lang/Integer;)Lorg/ek9/lang/Integer;
       518: astore        52
       520: iconst_0
       521: invokestatic  #CP                 // Method java/lang/Integer.toString:(I)Ljava/lang/String;
       524: invokestatic  #CP                 // Method org/ek9/lang/Integer._of:(Ljava/lang/String;)Lorg/ek9/lang/Integer;
       527: astore        53
       529: aload         52
       531: aload         53
       533: invokevirtual #CP                 // Method org/ek9/lang/Integer._gteq:(Lorg/ek9/lang/Integer;)Lorg/ek9/lang/Boolean;
       536: astore        54
       538: aload         54
       540: invokevirtual #CP                 // Method org/ek9/lang/Boolean._true:()Z
       543: istore        55
       545: iload         55
       547: ifeq          626
       550: aload         29
       552: astore        19
       554: aload         4
       556: astore        39
       558: aload         19
       560: astore        40
       562: aload         39
       564: aload         40
       566: invokevirtual #CP                 // Method org/ek9/lang/Integer._add:(Lorg/ek9/lang/Integer;)Lorg/ek9/lang/Integer;
       569: astore        41
       571: aload         41
       573: astore        4
       575: aload_2
       576: astore        42
       578: ldc           #CP                 // String i=
       580: invokestatic  #CP                 // Method org/ek9/lang/String._of:(Ljava/lang/String;)Lorg/ek9/lang/String;
       583: astore        43
       585: aload         19
       587: astore        44
       589: aload         44
       591: invokevirtual #CP                 // Method org/ek9/lang/Integer._string:()Lorg/ek9/lang/String;
       594: astore        45
       596: aload         43
       598: aload         45
       600: invokevirtual #CP                 // Method org/ek9/lang/String._add:(Lorg/ek9/lang/String;)Lorg/ek9/lang/String;
       603: astore        46
       605: aload         42
       607: aload         46
       609: invokevirtual #CP                 // Method org/ek9/lang/Stdout.println:(Lorg/ek9/lang/String;)V
       612: aload         29
       614: invokevirtual #CP                // Method org/ek9/lang/Integer._dec:()Lorg/ek9/lang/Integer;
       617: astore        56
       619: aload         56
       621: astore        29
       623: goto          511
       626: goto          629
       629: aload_2
       630: astore        57
       632: ldc           #CP                // String Total:
       634: invokestatic  #CP                 // Method org/ek9/lang/String._of:(Ljava/lang/String;)Lorg/ek9/lang/String;
       637: astore        58
       639: aload         4
       641: astore        59
       643: aload         59
       645: invokevirtual #CP                 // Method org/ek9/lang/Integer._string:()Lorg/ek9/lang/String;
       648: astore        60
       650: aload         58
       652: aload         60
       654: invokevirtual #CP                 // Method org/ek9/lang/String._add:(Lorg/ek9/lang/String;)Lorg/ek9/lang/String;
       657: astore        61
       659: aload         57
       661: aload         61
       663: invokevirtual #CP                 // Method org/ek9/lang/Stdout.println:(Lorg/ek9/lang/String;)V
       666: return

  static {};
    Code:
         0: return

  private void i_init();
    Code:
         0: return
}`

    ForRangeAssignmentIfUnset()
      -> input as Integer
      stdout <- Stdout()
      total <- 0

      // Simulating assignment if unset (:=?) pattern for for-range
      // Create unset limit, only assign if input > 0
      limit <- Integer()
      if input > 0
        limit: input

      // Assignment if unset (:=?) checks if left side was unset, then assigns
      if limit?
        for i in 1 ... limit
          total := total + i
          stdout.println("i=" + $i)

      stdout.println("Total: " + $total)
//EOF

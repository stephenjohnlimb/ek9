#!ek9
<?-
  Now for the pre-flow parts with the try/catch/finally.
-?>
defines module preflow.withtry.result

  defines function

    <?-
      Just a test fixture.
    -?>
    getExplicitResult()
      <- rtn <- Result("Steve", Integer())

    <?-
      This is the specific example we are showing.
      The declaration of o and its use in the guard means that the '?'
      Has been applied implicitly. Hence we can then use '.ok()' without
      any further checks.
    -?>
    tryCatchFinallyWithDeclarationWithResultTest()

      try o <- getExplicitResult()
        value <- o.ok()
        assert value?
      catch
        -> ex as Exception
        value <- o.ok()
        assert value?
      finally
        value <- o.ok()
        assert value?

//EOF
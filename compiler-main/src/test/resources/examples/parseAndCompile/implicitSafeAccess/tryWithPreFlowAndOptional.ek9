#!ek9
<?-
  Now for the pre-flow parts with the try/catch/finally.
-?>
defines module preflow.withtry.optional

  defines function

    <?-
      Just a test fixture.
    -?>
    getExplicitOptional()
      <- rtn <- Optional("Steve")

    <?-
      This is the specific example we are showing.
      The declaration of o and its use in the guard means that the '?'
      Has been applied implicitly. Hence we can then use '.get()' without
      any further checks.
    -?>
    tryCatchFinallyWithDeclarationWithOptionalTest()

      try o <- getExplicitOptional()
        value <- o.get()
        assert value?
      catch
        -> ex as Exception
        value <- o.get()
        assert value?
      finally
        value <- o.get()
        assert value?


//EOF